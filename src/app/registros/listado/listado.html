<div class="p-6 flex-1 bg-gray-50 flex flex-col shadow-lg border border-gray-200 rounded-2xl">
  <!-- Encabezado -->
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-bold bg-linear-to-r from-[#046CAC] to-[#046BB4] bg-clip-text text-transparent">
      Registros disponibles
    </h2>
    <div class="flex items-center gap-3">
      <!-- ðŸ”Ž Barra de bÃºsqueda -->
      <input type="text" [(ngModel)]="busqueda" placeholder="ðŸ” Buscar..."
        class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#046CAC]" />

      <button (click)="abrirModal()" class="bg-linear-to-r from-[#046BB4] to-[#4484B4] text-white py-3 px-4 rounded-lg font-semibold
                      shadow-md hover:shadow-glow transform transition-all duration-300
                      hover:scale-[1.05] active:scale-[0.95]
                      focus:outline-none focus:ring-2 focus:ring-[#046BB4] focus:ring-offset-2
                      disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none
                      flex items-center gap-2" *ngIf="rol === 'SUPERADMIN'|| rol === 'SUPERVISOR' || rol === 'USER'">

        <!-- Icono PNG -->
        <img src="assets/icons/agregar.png" alt="Nuevo" class="w-5 h-5" />

        Nuevo registro
      </button>

    </div>
  </div>

  <!-- Contenedor con scroll interno SOLO para la tabla -->
  <div class="overflow-x-auto overflow-y-auto max-h-160 rounded-xl shadow-md">
    <table class="table-auto w-full text-sm border-collapse">
      <thead>
        <tr class="bg-linear-to-r from-[#046BB4]/10 to-[#4484B4]/10">
          <th class="px-4 py-3 text-left font-semibold text-[#046CAC] cursor-pointer select-none"
            (click)="ordenar('numeroSolicitud')">
            Solicitud
            <span *ngIf="columnaOrdenada === 'numeroSolicitud'">{{ ordenAscendente ? 'â–²' : 'â–¼' }}</span>
            <span *ngIf="columnaOrdenada !== 'numeroSolicitud'" class="text-gray-400">â†•</span>
          </th>
          <th class="px-4 py-3 text-left font-semibold text-[#046CAC] cursor-pointer select-none"
            (click)="ordenar('creador')">
            Creador
            <span *ngIf="columnaOrdenada === 'creador'">{{ ordenAscendente ? 'â–²' : 'â–¼' }}</span>
            <span *ngIf="columnaOrdenada !== 'creador'" class="text-gray-400">â†•</span>
          </th>
          <th class="px-4 py-3 text-left font-semibold text-[#046CAC] cursor-pointer select-none"
            (click)="ordenar('fechaCreacion')">
            Fecha
            <span *ngIf="columnaOrdenada === 'fechaCreacion'">{{ ordenAscendente ? 'â–²' : 'â–¼' }}</span>
            <span *ngIf="columnaOrdenada !== 'fechaCreacion'" class="text-gray-400">â†•</span>
          </th>
          <th class="px-4 py-3 text-center font-semibold text-[#046CAC]">Acciones</th>
          <th *ngIf="rol === 'ADMIN' || rol === 'SUPERADMIN'" class="px-4 py-3 text-left font-semibold text-[#046CAC]">
            Correos autorizados
          </th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        <!-- ðŸ”Ž Usamos registrosFiltrados -->
        <tr *ngFor="let registro of registrosFiltrados"
          class="hover:bg-linear-to-r hover:from-[#046BB4]/5 hover:to-transparent transition-all duration-200">
          <td class="px-4 py-2 font-medium text-[#046CAC]">{{ registro.numeroSolicitud }}</td>
          <td class="px-4 py-2">{{ registro.creador }}</td>
          <td class="px-4 py-2">{{ registro.fechaCreacion | date:'dd/MM/yyyy HH:mm' }}</td>
          <td class="px-4 py-2 text-center">
            <a [routerLink]="['/dashboard/visualizar', registro.numeroSolicitud]"
              class="inline-flex items-center text-blue-600 hover:text-blue-800 transition">
              <img src="assets/icons/imagen.png" alt="ver registro"
                class="w-6 h-6 transition-transform duration-200 hover:scale-110 hover:brightness-110 hover:drop-shadow-md" />
            </a>
          </td>
          <td *ngIf="rol === 'ADMIN' || rol === 'SUPERADMIN'" class="px-4 py-2">
            <span class="text-gray-700">
              {{ registro.correosAutorizados ? registro.correosAutorizados.join(', ') : 'N/A' }}
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Modal -->
<div *ngIf="mostrarModal" class="fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50">

  <div class="bg-white rounded-2xl shadow-2xl w-150 max-h-[90vh] overflow-auto relative">

    <!-- Encabezado con gradiente -->
    <div class="bg-linear-to-r from-[#046BB4] to-[#4484B4] p-6 text-white rounded-t-2xl">
      <!-- BotÃ³n cerrar -->
      <button (click)="cerrarModal()" aria-label="Cerrar modal registro" class="absolute top-3 right-3 z-50 
                     bg-gray-200 text-gray-700 hover:bg-gray-300 
                     rounded-full p-2 shadow-md transition">âœ–</button>

      <h3 class="text-lg font-bold">
        Nuevo Registro
      </h3>

      <!-- DescripciÃ³n -->
      <p class="text-white/80 text-sm">
        Introdusco los datos del nuevo registro a continuaciÃ³n.
      </p>
    </div>

    <!-- Contenido -->
    <div class="p-6">
      <app-formulario-registro (registroCreado)="onRegistroCreado($event)" (guardado)="onRegistroGuardado()">
      </app-formulario-registro>
    </div>
  </div>
</div>