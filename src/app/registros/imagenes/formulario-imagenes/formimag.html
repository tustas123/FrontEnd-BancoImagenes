<form (ngSubmit)="guardarImagenes()" 
      class="space-y-8 p-8 bg-white/80 backdrop-blur-md rounded-2xl shadow-2xl border border-gray-200">

  <!-- TÃ­tulo -->
  <p class="text-xl font-extrabold mb-6 bg-linear-to-r from-[#ac0404] to-[#b40404] bg-clip-text text-transparent tracking-tight">
    (*Las extenciones permitidas son: .jpg, .jpeg, .png, .gif, .pdf, .doc, .docx)
  </p>

  
  <!-- Documentos fijos -->
  <div *ngFor="let doc of documentosFijos" class="mb-6">
    <label for="file-fijo-{{doc.tipo}}" class="block font-semibold text-gray-700 mb-2">
      {{ formatDocumento(doc.tipo) }}:
    </label> 
    <div class="flex items-center gap-4">
      <input id="file-fijo-{{doc.tipo}}" 
            type="file" 
            #fileInput 
            hidden 
            accept=".jpg,.jpeg,.png,.gif,.pdf,.doc,.docx,.xls,.xlsx" 
            (change)="onFileSelected($event, doc)" />
      <button type="button"
              aria-label="Seleccionar archivo para {{ formatDocumento(doc.tipo) }}"
              (click)="fileInput.click()
              "
              class="bg-linear-to-r from-[#046BB4] to-[#4484B4] text-white px-3 py-2 rounded-lg shadow-md hover:scale-105 transition-transform flex items-center gap-2">
        ðŸ“‚ <span>Seleccionar archivo</span>
      </button>

      <!-- NUEVO: miniatura/Ã­cono + nombre -->
      <div class="flex items-center gap-2">
        <img *ngIf="doc.archivo" 
            [src]="getThumbnailLocal(doc)" 
            [alt]="'Miniatura de ' + formatDocumento(doc.tipo)"
            class="w-8 h-8 object-cover rounded border border-gray-200" />
        <span class="text-sm text-gray-500 italic">{{ getNombreArchivo(doc) }}</span>
      </div>

      <button *ngIf="doc.archivo" type="button" (click)="eliminarArchivo(doc)"
              aria-label="Eliminar archivo de {{ formatDocumento(doc.tipo) }}"
              class="text-red-500 hover:text-red-700 text-lg font-bold">âœ–</button>
    </div>
  </div>

  <!-- Documentos extra -->
  
  <h3 class="text-xl font-bold mt-10 mb-4 bg-linear-to-r from-[#E45D96] to-[#F2A408] bg-clip-text text-transparent">
    ðŸ“Ž Documentos extra
  </h3>

  <div *ngFor="let doc of documentosExtra; let i = index" 
      class="border border-gray-200 rounded-xl p-6 shadow-sm mb-6 bg-white/90 backdrop-blur-sm hover:shadow-md transition">

    <!-- Tipo de documento -->
    <label for="file-extra-{{i}}" class="block font-semibold text-gray-700 mb-2">Tipo de documento:</label>
    <input id="file-extra-{{i}}" 
          name="tipo{{i}}" 
          [(ngModel)]="doc.tipo"
          required 
          autocomplete="off"
          class="w-48 border border-gray-300 px-3 py-2 rounded-lg 
                  focus:ring-[#046BB4] focus:border-[#046BB4] text-sm uppercase" />

    <!-- Vista del tipo "tipeado" (igual que en la grilla) -->
    <p class="text-xs text-gray-500 mt-1">
      Vista: <strong>{{ formatDocumento(doc.tipo) }}</strong>
    </p>

    <!-- Archivo -->
    <label for="file-extra-archivo-{{i}}" class="block font-semibold text-gray-700 mt-4 mb-2">Archivo:</label>
    <div class="flex items-center gap-3">
      <!-- Input oculto -->
      <input type="file"
            id="file-extra-archivo-{{i}}"
            #fileInput
            hidden
            accept=".jpg,.jpeg,.png,.gif,.pdf,.doc,.docx,.xls,.xlsx"
            (change)="onFileSelectedExtra($event, doc)" />

      <!-- BotÃ³n para abrir selector -->
      <button type="button"
              (click)="fileInput.click()"
              class="bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 text-sm font-semibold">
        ðŸ“‚ Seleccionar archivo
      </button>
    </div>

    <div class="flex items-center gap-3 mt-3">
      <!-- Miniatura/Ã­cono + nombre del archivo -->
      <div class="flex items-center gap-2">
        <img *ngIf="doc.archivo" 
            [src]="getThumbnailLocal(doc)" 
            [alt]="'Miniatura de ' + formatDocumento(doc.tipo)"
            class="w-8 h-8 object-cover rounded border border-gray-200" />
        <p class="text-sm text-gray-500 italic">{{ getNombreArchivo(doc) }}</p>
      </div>

      <button *ngIf="doc.archivo" type="button" (click)="eliminarArchivo(doc)"
              class="text-red-500 hover:text-red-700 text-xs font-medium">âœ– Quitar archivo</button>
      <button type="button" (click)="eliminarExtra(i)"
              class="text-red-600 hover:text-red-800 text-xs font-medium">
        <img src="assets/icons/borrar.png" alt="Eliminar" class="w-4 h-4 transition-transform duration-200 hover:scale-110 hover:brightness-75" />
      </button>
    </div>
  </div>

  <button type="button" (click)="agregarDocumentoExtra()"
          [disabled]="documentosExtra.length > 0 && !documentosExtra[documentosExtra.length-1].archivo"
          aria-label="Agregar documento extra"
          class="bg-linear-to-r from-[#F2A408] to-[#E45D96] text-white px-5 py-2 rounded-lg shadow-md hover:scale-105 transition-transform flex items-center gap-2 disabled:opacity-50">
    âž• <span>Agregar documento extra</span>
  </button>

  <!-- BotÃ³n guardar -->
  <button type="submit" 
          class="w-full mt-8 bg-linear-to-r from-green-600 to-green-500 text-white px-6 py-3 rounded-xl shadow-lg hover:scale-105 transition-transform font-semibold text-lg">
    ðŸ’¾ Guardar imÃ¡genes
  </button>

</form>
